<html xmlns: xmlns: xmlns:>
<style>
    .myCanvas{
       background-image: url("{% url 'binary_scale' %}");
    }
</style>
<h1 style="color: black">
    Video Stream
</h1>
<div style="width: 100%; overflow: hidden;">
    <div style="width: 250px; float: left;">
        <h2>Circle 1 Coordinates</h2>
        <p id="x1"></p>
        <p id="y1"></p></div>
    <div style="margin-left: 320px;">
        <h2>Circle 2 Coordinates</h2>
        <p id="x2"></p>
        <p id="y2"></p> </div>
</div>


<canvas class="myCanvas" width="600" height="480"  id="imgCanvas1" onclick="draw(event)">
</canvas>
<canvas class="myCanvas" width="600" height="480"  id="imgCanvas2" onclick="draw(event)">
</canvas>
&nbsp;&nbsp;

<button style="height:50px;width:100px" type="submit" onclick="location.href='{% url 'grey_scale_page' %}'">Gray Scale</button>
<button style="height:50px;width:100px" type="submit" onclick="location.href='{% url 'index' %}'">Colour</button>
<button style="height:50px;width:100px" onclick="javascript:window.close()">Exit</button>
<div style="width: 100%; overflow: hidden;">
<div id="mydata" style="width: 320px; float: left;">
    <b>Current coordinates in the system of circle 1</b>
    <table id="myTableData"  border="1" cellpadding="2">
        <tr>
            <td>&nbsp;</td>
            <td><b>X1</b></td>
            <td><b>Y1</b></td>
        </tr>
</table>
</div>
<div style="margin-left: 180px;float: left;" >
    <b>Current coordinates in the system of circle 2</b>
    <table id="myTableData2"  border="1" cellpadding="3">
        <tr>
            <td><b>X2</b></td>
            <td><b>Y2</b></td>
        </tr>
</table>
</div>
<div style="margin-left: 920px;" >
    <b>Distance</b>
    <table id="myTableData3"  border="1" cellpadding="3">
        <tr>
            <td><b>Result</b></td>
        </tr>
</table>
</div>
</div>
&nbsp;

<script type="text/javascript">
    var canvas = document.getElementById("imgCanvas1");
    var context = canvas.getContext("2d");
    var counter = 0;

    //section to get the coordinates of the circle
    function getMousePosition(canvas, event) {
        if(counter == 1){
        let rect = canvas.getBoundingClientRect();
        let x1 = event.clientX - rect.left;
        let y1 = event.clientY - rect.top;
        console.log("Coordinate x1: " + x1, "Coordinate y1: " + y1);
        document.getElementById("x1").innerHTML = "x1 = " + x1;
        document.getElementById("y1").innerHTML = "y1 = " + y1;
        X1=x1;
        Y1=y1;
        addRow(x1,y1)
        }
        else if(counter == 2){
        let rect = canvas.getBoundingClientRect();
        let x2 = event.clientX - rect.left;
        let y2 = event.clientY - rect.top;
        console.log("Coordinate x2: " + x2, "Coordinate y2: " + y2);
        document.getElementById("x2").innerHTML = "x2 = " + x2;
        document.getElementById("y2").innerHTML = "y2 = " + y2;
        addRow2(x2,y2)
        console.log(X1,Y1,x2,y2)
        let result = getDistance(X1,Y1,x2,y2)
        addRow3(result);
        console.log(result);
        }else if(counter == 3){
            context.clearRect(0,0,600,480);
               //clears the previous circle
            x1=x2=y1=y2=0;
            document.getElementById("x1").innerHTML = "x1 = " + x1;
            document.getElementById("y1").innerHTML = "y1 = " + y1;
            document.getElementById("x2").innerHTML = "x2 = " + x2;
            document.getElementById("y2").innerHTML = "y2 = " + y2
            return false;
        }
    }

    let canvasElem = document.querySelector("canvas");

    canvasElem.addEventListener("mousedown", function (e) {
        counter++;
        getMousePosition(canvasElem, e);

    });

    //section to draw the circle
    function createImageOnCanvas(imageId) {
        canvas.style.display = "block";
        document.getElementById("images").style.overflowY = "hidden";
        var img = new Image(500, 500);
        img.src = document.getElementById(imageId).src;
        context.drawImage(img, (0), (0)); //onload....
    }

   function draw(e) {

    var canvas = document.getElementById("imgCanvas1");
    var context = canvas.getContext("2d");
    var rect = canvas.getBoundingClientRect();
    var posx = e.clientX - rect.left;
    var posy = e.clientY - rect.top;
    if(counter!=3){
    context.fillStyle = "#FFFFFF"; // to change colour of circle
    context.beginPath();
    context.arc(posx, posy, 10, 0, 2 * Math.PI);  // to change size of circle
    context.fill();
    }else if(counter == 3){
        counter = 0;
    }
    console.log(counter);
}
function addRow(a, b) {

          var table = document.getElementById("myTableData");

          var rowCount = table.rows.length;
          var row = table.insertRow(rowCount);

          row.insertCell(0).innerHTML= '<input type="button" value = "Delete" onClick="Javacsript:deleteRow(this)">';
          row.insertCell(1).innerHTML= a;
          row.insertCell(2).innerHTML= b;

      }
      function deleteRow(obj) {

      var index = obj.parentNode.parentNode.rowIndex;
      var table = document.getElementById("myTableData");
      table.deleteRow(index);
      deleteRow2(index);
      deleteRow3(index);

  }
function addRow2(a, b) {

          var table = document.getElementById("myTableData2");

          var rowCount = table.rows.length;
          var row = table.insertRow(rowCount);

          row.insertCell(0).innerHTML= a;
          row.insertCell(1).innerHTML= b;

      }
      function deleteRow2(obj) {

      var table = document.getElementById("myTableData2");
      table.deleteRow(obj);

  }
function addRow3(result) {

          var table = document.getElementById("myTableData3");

          var rowCount = table.rows.length;
          var row = table.insertRow(rowCount);

          row.insertCell(0).innerHTML= result;

      }
      function deleteRow3(obj) {

      var table = document.getElementById("myTableData3");
      table.deleteRow(obj);

  }
  function load() {

    console.log("Page load finished");

}
function getDistance(x1, y1, x2, y2){
    let y = x2 - x1;
    let x = y2 - y1;

    return Math.sqrt(x * x + y * y);
}
</script>
</body>

</html>